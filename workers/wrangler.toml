# Cloudflare Workers Configuration for PR Review Agent
# Documentation: https://developers.cloudflare.com/workers/wrangler/configuration/

name = "pr-review-worker"
main = "src/index.ts"
compatibility_date = "2024-11-27"
compatibility_flags = ["nodejs_compat"]

# Account ID (get from: npx wrangler whoami)
# account_id = "your-account-id-here"

# Workers AI binding (optional - for future AI features)
# [ai]
# binding = "AI"

# Environment Variables (non-secret)
[vars]
ENVIRONMENT = "production"
API_VERSION = "1.0.0"
ALLOWED_ORIGINS = "https://pr-review.pages.dev,https://*.pages.dev"

# Secrets (set with: npx wrangler secret put SECRET_NAME)
# Required secrets:
# - GEMINI_API_KEY: Google Gemini API key for AI-powered reviews
# - GITHUB_TOKEN: GitHub personal access token for higher rate limits (optional but recommended)
#
# To set secrets, run:
#   npx wrangler secret put GEMINI_API_KEY
#   npx wrangler secret put GITHUB_TOKEN
#   (paste your API key/token when prompted)
#
# SECURITY: Secrets are encrypted and never exposed in code or logs

# Routes (optional - if using custom domain)
# [[routes]]
# pattern = "api.your-domain.com/*"
# zone_name = "your-domain.com"

# Development configuration
[env.development]
name = "pr-review-worker-dev"
vars = { ENVIRONMENT = "development" }

# Production configuration
[env.production]
name = "pr-review-worker"
vars = { ENVIRONMENT = "production" }
